---
layout: other
activePage: tags
---
<ul class="archives-list" style="display: none;">
  {% for post in site.posts %}
    {% for tag in post.tags %}
        <li data-tag="{{ tag }}">
          <p><a href="{{ post.url }}">{{ post.title }}</a></p>
          <p class="time-tag">
            <span class="time">{{post.date|date:"%Y-%m-%d"}}</span>
            <span class="tag-label">标签:</span>
            {% for tag in post.tags %}
            <a class="tag" href="/tags/index.html#{{ tag | replace:' ', '_' }}">{{ tag }}</a> 
            {% endfor %}
          </p>
        </li> 
    {% endfor %}
  {% endfor %}  
</ul>
<script>
  (function($){
    $(function(){
      var html;
      var tagsList = $('.archives-list');
      var tags = tagsList.children().map(function(){
        return this.getAttribute('data-tag');
      });
      var tag;
      var map = {};
      var target = tagsList;
      $.each(tags||[], function(i, n){
        map[n] = $.trim(n||'').replace(/\s+/, '_');
      });
      for(var i in map){
        tag = map[i];
        html = [
        '<h5 id="', tag, '"><em>', i, '</em></h5>',
        '<ul class="archives-list" id="', tag, '_list"></ul>'
        ];
        $(html.join('')).insertAfter(target);
        target = $('#'+tag+'_list');
        target.append(tagsList.children('li[data-tag="'+i+'"]').clone());
      }
      tagsList.remove();
      tagsList = null;       
    });
  })(jQuery);
</script>