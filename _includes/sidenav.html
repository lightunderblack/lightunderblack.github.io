<div class="sidenav">
	<h5>归档</h5>
	<ul>
	  {% for post in site.posts %}
	    {% unless post.next %}
	      <li><a href="{{site.url}}/archives/index.html#{{ post.date | date: '%Y' }}">{{ post.date | date: '%Y' }}</a></li>
	    {% else %}
	      {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
	      {% capture nyear %}{{ post.next.date | date: '%Y' }}{% endcapture %}
	      {% if year != nyear %}
	        <li><a href="{{site.url}}/archives/index.html#{{ post.date | date: '%Y' }}">{{ post.date | date: '%Y' }}</a></li>
	      {% endif %}
	    {% endunless %}
	  {% endfor %}
	</ul>
	<h5>标签</h5>
	<ul id="tag-list" style="display:none;">
		{% for post in site.posts %}
			{% for tag in post.tags %}
			   <li>{{tag}}</li>
			{% endfor %}
		{% endfor %}	
	</ul>		
</div>
<script type="text/javascript">
	(function($){
		$(function(){
			var html = [];
			var tagsList = $('#tag-list');
			var tags = tagsList.children().map(function(){
				return $(this).text();
			});
			var map = {};
			$.each(tags||[], function(i, n){
				map[n] = map[n] ? map[n] + 1 : 1;
			});
			tags = [];
			for(var tag in map){
				tags.push(tag);
			}
			$.each(tags.sort(function(a, b){
				a = a.toLowerCase();
				b = b.toLowerCase();
				return a > b ? 1 : ((a == b) ? 0 : -1);
			}), function(i, tag){
				html.push('<li><a href="/tag/'+tag+'">'+tag+'</a></li>');
			});
			tagsList.html(html.join('')).show();
		});
	})(jQuery);
</script>
